
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Ajedrez</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    </head>
<body style="justify-content: center; display: block; align-items: center; padding-bottom: 40px; background-color: rgb(245, 245, 245); text-align: center !important;">
    <div style="background-color: #1d1d1d;">
        <ul class="nav" style="background-color: #1d1d1d; width: 1000px; place-content: center;">
            <li class="nav-item">
              <a class="nav-link" href="http://localhost:3000/users" style="color: #f5f5f5">Usuarios</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="http://localhost:3000/matches" style="color: #f5f5f5">Partidos</a>
            </li>
            <li class="nav-item">
                <a id="signout-button" class="nav-link" href="#" style="color: #f5f5f5">Salir</a>
            </li>
        </ul>
    </div>

    <div style="display: grid; place-content: center;">
        <br>
        <div style="width: 1000px;">
            <h1 style="text-align: left;">Usuarios</h1>
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Nombre</th>
                    <th scope="col">Nivel</th>
                    <th scope="col">Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Rodrigo Ceron</td>
                    <td>Experto</td>
                    <td>
                        <span class="challenge-user-button"><a href="#">Desafiar</a></span>
                        <span class="edit-user-button" style="display: none;">| <a href="#">Modificar</a></span>
                        <span class="delete-user-button" style="display: none;">| <a href="#">Eliminar</a></span>
                    </td>
                  </tr>
                  <tr>
                    <td>Roberto Hernandez</td>
                    <td>Intermedio</td>
                    <td>
                        <span class="challenge-user-button"><a href="#">Desafiar</a></span>
                        <span class="edit-user-button" style="display: none;">| <a href="#">Modificar</a></span>
                        <span class="delete-user-button" style="display: none;">| <a href="#">Eliminar</a></span>
                    </td>
                  </tr>
                  <tr>
                    <td>Andrez Parra</td>
                    <td>Experto</td>
                    <td>
                        <span class="challenge-user-button"><a href="#">Desafiar</a></span>
                        <span class="edit-user-button" style="display: none;">| <a href="#">Modificar</a></span>
                        <span class="delete-user-button" style="display: none;">| <a href="#">Eliminar</a></span>
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
    </div>

    <script>
        $( document ).ready(function() {
            const idUser = localStorage.getItem('idUser');
            const userName = localStorage.getItem('userName');
            const userLevel = localStorage.getItem('userLevel');
            const userType = localStorage.getItem('userType');

            console.log('userType', userType);

            // If user is not logged, redirect to login.
            if (userType == 'null') {
                window.location.replace("http://localhost:3000/login");
                return;
            }

            // If user is admin, can edit and delete other users.
            if (userType === "admin") {
                $(".edit-user-button").css("display", "contents");
                $(".delete-user-button").css("display", "contents");
            }
            // $.ajax({
            //     type: "GET",
            //     dataType: 'json',
            //     contentType: 'application/json',
            //     url: 'http://localhost:3000/api/users',
            //     data: {
            //         username: 'rceron',
            //         password: '12345'
            //     },
            //     success: function (data) {
            //         localStorage.setItem('test', 'Es una prueba.');
            //         console.log(data);
            //     },
            // });

            // When click exit.
            $("#signout-button").on( "click", function() {
                // Delete global variables.
                localStorage.setItem('idUser', null);
                localStorage.setItem('userName', null);
                localStorage.setItem('userLevel', null);
                localStorage.setItem('userType', null);

                // Redirect to login.
                window.location.href = "http://localhost:3000/login";
            });
        });
        
    
    </script>
</body>
</html>
